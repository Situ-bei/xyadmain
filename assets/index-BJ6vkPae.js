import{_ as Y,a as L,r as g,o as P,b,c as U,d as j,e as h,f as A,g as e,h as v,j as d,w as n,i as p,t as x,n as R,l as C,F as $,ag as q,E as G,ah as J,s as K,y as Q,x as W,ai as X,v as Z}from"./index-DOHSIiiC.js";import{E as ee,a as te,b as ae,c as ne}from"./index-bscBwb2R.js";import{E as oe}from"./index-BJD0vWXz.js";const le={class:"but"},re={class:"but-right"},ie={class:"creatTime"},se={class:"creatTime-span"},ce={class:"pagination-info"},de={__name:"index",setup(pe){const y=L().meta,r=(o={})=>{q({...i,...o}).then(({data:l})=>{const{list:_,total:u}=l.data;s.list=_,s.total=u})},s=g({});P(()=>{r(),window.addEventListener("resize",w)}),console.log(s,"列表初始数据");const c=b(),E=()=>{console.log(c.value),c.value?r({out_trade_no:c.value}):G.warning("请输入订单编号查询")},k=()=>{r()},z=o=>g({已取消:"info",待支付:"warning",已完成:"success"})[o],S=o=>{J({id:o}).then(({data:l})=>{console.log(l),l.code===1e4&&r()})},I=()=>{},i=g({pageNum:1,pageSize:10}),N=o=>{i.pageNum=o,r()},D=o=>{i.pageSize=o,r()},f=b(window.innerHeight-50-40-63-52-57.5),w=()=>{f.value=window.innerHeight-50-40-63-52-57.5};return U(()=>{window.addEventListener("resize",w)}),(o,l)=>{const _=K,u=Q,m=W,a=ee,M=X,T=te,V=j("Clock"),B=Z,H=oe,F=ae,O=ne;return h(),A($,null,[e(_,{route:v(y)},null,8,["route"]),d("div",le,[e(u,{style:{width:"300px"},clearable:"",onClear:k,"prefix-icon":"Search",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=t=>c.value=t)},null,8,["modelValue"]),d("div",re,[e(m,{type:"primary",round:"",onClick:E,size:"default",icon:"search"},{default:n(()=>[p(" 查询 ")]),_:1})])]),e(F,{data:s.list,style:{width:"100%"},"max-height":f.value,border:"",stripe:"","highlight-current-row":"",class:"table-container"},{default:n(()=>[e(a,{prop:"out_trade_no",label:"订单号",resizable:"","min-width":"140",align:"center",sortable:"",fixed:""}),e(a,{prop:"hospital_name",label:"就诊医院","min-width":"80",align:"center"}),e(a,{prop:"service_name",label:"陪诊服务","min-width":"80",align:"center"}),e(a,{prop:"sex",label:"陪护师","min-width":"60",align:"center"},{default:n(t=>[e(M,{src:t.row.serviceImg,style:{width:"35px",height:"35px"},class:"avatar"},null,8,["src"])]),_:1}),e(a,{prop:"client.mobile",label:"陪护师手机号","min-width":"120",align:"center"}),e(a,{prop:"price",label:"总价","min-width":"40",align:"center"}),e(a,{prop:"trade_state",label:"订单状态","min-width":"90",width:"90",align:"center"},{default:n(t=>[e(T,{type:z(t.row.trade_state),round:"",effect:"dark"},{default:n(()=>[p(x(t.row.trade_state?t.row.trade_state:"已完成"),1)]),_:2},1032,["type"])]),_:1}),e(a,{prop:"order_start_time",label:"下单时间","min-width":"125",align:"center"},{default:n(t=>[d("div",ie,[e(B,null,{default:n(()=>[e(V)]),_:1}),d("span",se,x(v(R)(t.row.order_start_time).format("YYYY-MM-DD")),1)])]),_:1}),e(a,{prop:"service_state",label:"接单状态","min-width":"60",align:"center"}),e(a,{prop:"tel",label:"联系人手机号","min-width":"120",align:"center"}),e(a,{label:"操作",width:"100px",align:"center",fixed:"right"},{default:n(t=>[t.row.trade_state==="待服务"?(h(),C(H,{key:0,"confirm-button-text":"确认","cancel-button-text":"取消",width:"220",icon:"InfoFilled","icon-color":"#626AEF",title:"是否确认完成吗?",onCancel:I,onConfirm:_e=>S(t.row.out_trade_no)},{reference:n(()=>[e(m,{type:"primary",link:""},{default:n(()=>[p("服务完成")]),_:1})]),_:2},1032,["onConfirm"])):(h(),C(m,{key:1,type:"primary",link:""},{default:n(()=>[p(" 不可操作 ")]),_:1}))]),_:1})]),_:1},8,["data","max-height"]),d("div",ce,[e(O,{class:"pagination-info-item","current-page":i.pageNum,"onUpdate:currentPage":l[1]||(l[1]=t=>i.pageNum=t),"page-size":i.pageSize,background:!0,size:"default",layout:"total, prev, pager, next",total:parseInt(s.total),onSizeChange:D,onCurrentChange:N},null,8,["current-page","page-size","total"])])],64)}}},he=Y(de,[["__scopeId","data-v-62438a74"]]);export{he as default};
